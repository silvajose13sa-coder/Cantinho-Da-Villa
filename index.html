<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cantinho da Villa</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial,Helvetica,sans-serif;background:#fff8e1}

header{
  background:#b71c1c;
  text-align:center;
  color:#fff;
  padding:40px 20px;
}
nav{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  background:#2e7d32;
  padding:10px;
}
nav button{
  border:none;
  padding:10px 15px;
  border-radius:20px;
  font-weight:bold;
  cursor:pointer;
}

section{
  max-width:1000px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
}

.card{
  border:1px solid #ddd;
  padding:15px;
  border-radius:10px;
}
.card button{
  width:100%;
  margin-top:8px;
  padding:8px;
  background:#d32f2f;
  color:#fff;
  border:none;
  border-radius:6px;
}

.cart-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#d32f2f;
  color:#fff;
  padding:12px 18px;
  border-radius:30px;
  cursor:pointer;
}

.cart{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:#fff;
  transform:translateY(100%);
  transition:.3s;
  padding:15px;
}
.cart.active{transform:translateY(0)}
</style>
</head>

<body>

<header>
  <h1>Cantinho da Villa</h1>
</header>

<nav>
  <button onclick="mostrar('hamb')">ğŸ” HambÃºrguer</button>
  <button onclick="mostrar('hot')">ğŸŒ­ Hot Dog</button>
  <button onclick="mostrar('beb')">ğŸ¥¤ Bebidas</button>
  <button onclick="mostrar('combo')">ğŸ Combos</button>
  <button onclick="mostrar('batata')">ğŸŸ Batatas</button>
  <button onclick="abrirPainel()">ğŸ”’ Painel</button>
</nav>

<section>
  <h2 id="titulo">Escolha uma categoria</h2>
  <div class="grid" id="menu"></div>
</section>

<div class="cart-btn" onclick="toggleCart()">ğŸ›’ Pedido (<span id="qtd">0</span>)</div>

<div class="cart" id="cart">
  <h3>Pedido</h3>
  <div id="items"></div>
  <p>Total: R$ <span id="total">0</span></p>
</div>

<div id="painel" style="display:none;position:fixed;inset:0;background:#0008">
 <div style="background:#fff;max-width:500px;margin:40px auto;padding:20px">
  <input id="senha" placeholder="Senha" type="password">
  <button onclick="entrar()">Entrar</button>
  <div id="painelConteudo"></div>
 </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyB98Yu2YieFD2DPFQPAWhMb36zMb2TkM6g",
  authDomain: "cantinho-da-villa.firebaseapp.com",
  projectId: "cantinho-da-villa"
});
const db = firebase.firestore();
const ref = db.collection("produtos").doc("cardapio");

let dados = {};
let carrinho = [];
const senhaCorreta = "s@Samuel2018";

async function init(){
 const doc = await ref.get();
 if(!doc.exists){
  dados = {
   hamb:[
    {nome:"X-Burger",preco:15,ativo:true},
    {nome:"X-Salada",preco:17,ativo:true},
    {nome:"X-Bacon",preco:19,ativo:true},
    {nome:"X-Egg",preco:18,ativo:true},
    {nome:"X-Tudo",preco:22,ativo:true}
   ],
   hot:[
    {nome:"Hot Simples",preco:10,ativo:true},
    {nome:"Hot Bacon",preco:14,ativo:true},
    {nome:"Hot Cheddar",preco:15,ativo:true},
    {nome:"Hot Duplo",preco:18,ativo:true},
    {nome:"Hot Especial",preco:20,ativo:true}
   ],
   beb:[
    {nome:"Refrigerante",preco:5,ativo:true},
    {nome:"Suco",preco:6,ativo:true},
    {nome:"Ãgua",preco:3,ativo:true},
    {nome:"H2O",preco:4,ativo:true},
    {nome:"GuaranÃ¡",preco:5,ativo:true}
   ],
   combo:[
    {nome:"Combo 1",preco:25,ativo:true},
    {nome:"Combo 2",preco:28,ativo:true},
    {nome:"Combo 3",preco:30,ativo:true},
    {nome:"Combo 4",preco:32,ativo:true},
    {nome:"Combo 5",preco:35,ativo:true}
   ],
   batata:[
    {nome:"Batata Pequena",preco:8,ativo:true},
    {nome:"Batata MÃ©dia",preco:12,ativo:true},
    {nome:"Batata Grande",preco:15,ativo:true},
    {nome:"Batata Cheddar",preco:18,ativo:true},
    {nome:"Batata Bacon",preco:20,ativo:true}
   ]
  };
  await ref.set(dados);
 }else{
  dados = doc.data();
 }
}
init();

function mostrar(cat){
 menu.innerHTML="";
 titulo.innerText = cat.toUpperCase();
 dados[cat].forEach(i=>{
  if(!i.ativo) return;
  menu.innerHTML+=`
   <div class="card">
    <h3>${i.nome}</h3>
    <p>R$ ${i.preco}</p>
    <button onclick="add('${i.nome}',${i.preco})">Adicionar</button>
   </div>`;
 });
}

function add(n,p){
 carrinho.push({n,p});
 render();
}
function render(){
 let t=0, html="";
 carrinho.forEach((i,idx)=>{
  t+=i.p;
  html+=`${i.n} <button onclick="carrinho.splice(${idx},1);render()">âŒ</button><br>`;
 });
 items.innerHTML=html;
 total.innerText=t.toFixed(2);
 qtd.innerText=carrinho.length;
}
function toggleCart(){cart.classList.toggle("active")}

function abrirPainel(){painel.style.display="block"}
function entrar(){
 if(senha.value!==senhaCorreta){alert("Senha errada");return}
 let h="";
 for(let c in dados){
  h+=`<h3>${c}</h3>`;
  dados[c].forEach((i,idx)=>{
   h+=`${i.nome} 
   <input type="number" value="${i.preco}" onchange="dados['${c}'][${idx}].preco=this.value;ref.set(dados)">
   <button onclick="dados['${c}'][${idx}].ativo=!dados['${c}'][${idx}].ativo;ref.set(dados);entrar()">ON/OFF</button><br>`;
  });
 }
 painelConteudo.innerHTML=h;
}
</script>

</body>
</html>
